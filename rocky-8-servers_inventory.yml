---
plugin: netbox.netbox.nb_inventory
api_endpoint: https://192.168.253.134
token: FZRvENMkPG8xXTKdP9ewxmGtSgLuN8xaAMHkvcgr
validate_certs: false

# 1. Skip the schema fetch entirely
fetch_all: true
validate_query_filters: false

# 2. Simplified Metadata (Fetching interfaces can sometimes slow it down)
config_context: true
primary_ip: true

# 3. Filtering logic
query_filters:
  - status: "active"
  - cluster_id: 1

# 4. Host Variable Mapping
compose:
  ansible_host: primary_ip4.address.split('/')[0]
  primary_ip4: primary_ip4.address.split('/')[0]
