---
plugin: netbox.netbox.nb_inventory
api_endpoint: https://192.168.253.134
token: e25d40b3982acdce31a6c964b0076b83f09cdac5
validate_certs: false
timeout: 60

# 1. STOP THE SCHEMA FETCH
# This is the most important setting for low-memory servers
validate_query_filters: false
fetch_all: true

# 2. Limit the data being pulled to the bare minimum
config_context: true
interfaces: true
primary_ip: true
services: false

group_by:
  - status
  - tags

# 3. Use your verified filter
query_filters:
  - status: "active"
  - cluster_id: 1

compose:
  ansible_host: primary_ip4.address.split('/')[0]
  primary_ip4: primary_ip4.address.split('/')[0]
